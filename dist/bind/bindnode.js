define(["require", "exports", "./bind", "observejs"], function (require, exports, bind_1, observejs_1) {
    function bindNode(node, model) {
        var isTextNode = node.nodeType === 3;
        var hasOnlyTextNodes = (node.shadowRoot && node.shadowRoot.childElementCount === 0) || node.childElementCount === 0;
        if (isTextNode || hasOnlyTextNodes) {
            bindTextNode(node, model);
        }
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = bindNode;
    function bindTextNode(node, model) {
        bind_1.regex.lastIndex = 0;
        var match = bind_1.regex.exec(node.textContent);
        if (match) {
            var path = match[1];
            var r = new RegExp("\{\{" + path + "\}\}", "g");
            var originalText = node.textContent;
            var _a = model.get(path), object = _a.object, value = _a.value;
            var observer = new observejs_1.PathObserver(object, path);
            var cb = function (newVal, oldVal) {
                node.textContent = originalText.replace(r, newVal);
            };
            observer.open(cb);
            cb(value, null);
        }
    }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJpbmQvYmluZG5vZGUudHMiXSwibmFtZXMiOlsiYmluZE5vZGUiLCJiaW5kVGV4dE5vZGUiXSwibWFwcGluZ3MiOiI7SUFJQSxrQkFBaUMsSUFBUyxFQUFFLEtBQVc7UUFDdERBLElBQUlBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLEtBQUtBLENBQUNBLENBQUNBO1FBQ3JDQSxJQUFJQSxnQkFBZ0JBLEdBQUlBLENBQU9BLElBQUtBLENBQUNBLFVBQVVBLElBQVVBLElBQUtBLENBQUNBLFVBQVVBLENBQUNBLGlCQUFpQkEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsSUFBY0EsSUFBS0EsQ0FBQ0EsaUJBQWlCQSxLQUFLQSxDQUFDQSxDQUFBQTtRQUM3SUEsRUFBRUEsQ0FBQUEsQ0FBQ0EsVUFBVUEsSUFBSUEsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNuQ0EsWUFBWUEsQ0FBQ0EsSUFBSUEsRUFBRUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFDM0JBLENBQUNBO0lBRUZBLENBQUNBO0lBUEQ7OEJBT0MsQ0FBQTtJQUVELHNCQUFzQixJQUFTLEVBQUUsS0FBVztRQUMzQ0MsWUFBS0EsQ0FBQ0EsU0FBU0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDcEJBLElBQUlBLEtBQUtBLEdBQUdBLFlBQUtBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBO1FBQ3pDQSxFQUFFQSxDQUFBQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNWQSxJQUFJQSxJQUFJQSxHQUFHQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNwQkEsSUFBSUEsQ0FBQ0EsR0FBR0EsSUFBSUEsTUFBTUEsQ0FBQ0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQUE7WUFHL0NBLElBQUlBLFlBQVlBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBO1lBRXBDQSxJQUFJQSxLQUFrQkEsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBaENBLE1BQU1BLGNBQUVBLEtBQUtBLFdBQW1CQSxDQUFDQTtZQUN0Q0EsSUFBSUEsUUFBUUEsR0FBR0EsSUFBSUEsd0JBQVlBLENBQUNBLE1BQU1BLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1lBRTlDQSxJQUFJQSxFQUFFQSxHQUFHQSxVQUFDQSxNQUFNQSxFQUFFQSxNQUFNQTtnQkFDdkJBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLFlBQVlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO1lBQ3BEQSxDQUFDQSxDQUFDQTtZQUNGQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtZQUNsQkEsRUFBRUEsQ0FBQ0EsS0FBS0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDakJBLENBQUNBO0lBQ0ZBLENBQUNBIiwiZmlsZSI6ImJpbmQvYmluZG5vZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTW9kZWwgZnJvbSBcIi4vbW9kZWxcIlxyXG5pbXBvcnQge3JlZ2V4fSBmcm9tIFwiLi9iaW5kXCJcclxuaW1wb3J0IHtQYXRoT2JzZXJ2ZXJ9IGZyb20gXCJvYnNlcnZlanNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmluZE5vZGUobm9kZTpOb2RlLCBtb2RlbDpNb2RlbCk6IHZvaWQge1xyXG5cdGxldCBpc1RleHROb2RlID0gbm9kZS5ub2RlVHlwZSA9PT0gMztcclxuXHRsZXQgaGFzT25seVRleHROb2RlcyA9ICAoKDxhbnk+bm9kZSkuc2hhZG93Um9vdCAmJiAoPGFueT5ub2RlKS5zaGFkb3dSb290LmNoaWxkRWxlbWVudENvdW50ID09PSAwKSB8fCAoPEVsZW1lbnQ+bm9kZSkuY2hpbGRFbGVtZW50Q291bnQgPT09IDAgXHJcblx0aWYoaXNUZXh0Tm9kZSB8fCBoYXNPbmx5VGV4dE5vZGVzKSB7XHJcblx0XHRiaW5kVGV4dE5vZGUobm9kZSwgbW9kZWwpO1xyXG5cdH1cclxuXHRcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFRleHROb2RlKG5vZGU6Tm9kZSwgbW9kZWw6TW9kZWwpOiB2b2lkIHtcclxuXHRyZWdleC5sYXN0SW5kZXggPSAwO1xyXG5cdGxldCBtYXRjaCA9IHJlZ2V4LmV4ZWMobm9kZS50ZXh0Q29udGVudCk7XHJcblx0aWYobWF0Y2gpIHtcclxuXHRcdGxldCBwYXRoID0gbWF0Y2hbMV07XHJcblx0XHRsZXQgciA9IG5ldyBSZWdFeHAoXCJcXHtcXHtcIiArIHBhdGggKyBcIlxcfVxcfVwiLCBcImdcIilcclxuXHRcdFxyXG5cdFx0XHJcblx0XHRsZXQgb3JpZ2luYWxUZXh0ID0gbm9kZS50ZXh0Q29udGVudDtcclxuXHRcdFxyXG5cdFx0bGV0IHtvYmplY3QsIHZhbHVlfSA9IG1vZGVsLmdldChwYXRoKTtcclxuXHRcdGxldCBvYnNlcnZlciA9IG5ldyBQYXRoT2JzZXJ2ZXIob2JqZWN0LCBwYXRoKTtcclxuXHRcdFxyXG5cdFx0bGV0IGNiID0gKG5ld1ZhbCwgb2xkVmFsKSA9PiB7XHJcblx0XHRcdG5vZGUudGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQucmVwbGFjZShyLCBuZXdWYWwpO1xyXG5cdFx0fTtcclxuXHRcdG9ic2VydmVyLm9wZW4oY2IpO1xyXG5cdFx0Y2IodmFsdWUsIG51bGwpO1xyXG5cdH1cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==