define(["require", "exports", "./bind", "observejs"], function (require, exports, bind_1, observejs_1) {
    function bindNode(node, model) {
        var isTextNode = node.nodeType === 3;
        var hasOnlyTextNodes = node.childElementCount === 0;
        if (isTextNode || hasOnlyTextNodes) {
            bindTextNode(node, model);
        }
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = bindNode;
    function bindTextNode(node, model) {
        bind_1.regex.lastIndex = 0;
        var match = bind_1.regex.exec(node.textContent);
        if (match) {
            var path = match[1];
            var r = new RegExp("\{\{" + path + "\}\}", "g");
            var originalText = node.textContent;
            var _a = model.get(path), object = _a.object, value = _a.value;
            var observer = new observejs_1.PathObserver(object, path);
            var cb = function (newVal, oldVal) {
                node.textContent = originalText.replace(r, newVal);
            };
            observer.open(cb);
            cb(value, null);
        }
    }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJpbmQvYmluZG5vZGUudHMiXSwibmFtZXMiOlsiYmluZE5vZGUiLCJiaW5kVGV4dE5vZGUiXSwibWFwcGluZ3MiOiI7SUFJQSxrQkFBaUMsSUFBUyxFQUFFLEtBQVc7UUFDdERBLElBQUlBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLEtBQUtBLENBQUNBLENBQUNBO1FBQ3JDQSxJQUFJQSxnQkFBZ0JBLEdBQWFBLElBQUtBLENBQUNBLGlCQUFpQkEsS0FBS0EsQ0FBQ0EsQ0FBQUE7UUFDOURBLEVBQUVBLENBQUFBLENBQUNBLFVBQVVBLElBQUlBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbkNBLFlBQVlBLENBQUNBLElBQUlBLEVBQUVBLEtBQUtBLENBQUNBLENBQUNBO1FBQzNCQSxDQUFDQTtJQUVGQSxDQUFDQTtJQVBEOzhCQU9DLENBQUE7SUFFRCxzQkFBc0IsSUFBUyxFQUFFLEtBQVc7UUFDM0NDLFlBQUtBLENBQUNBLFNBQVNBLEdBQUdBLENBQUNBLENBQUNBO1FBQ3BCQSxJQUFJQSxLQUFLQSxHQUFHQSxZQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxDQUFDQTtRQUN6Q0EsRUFBRUEsQ0FBQUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDVkEsSUFBSUEsSUFBSUEsR0FBR0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDcEJBLElBQUlBLENBQUNBLEdBQUdBLElBQUlBLE1BQU1BLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEVBQUVBLEdBQUdBLENBQUNBLENBQUFBO1lBRy9DQSxJQUFJQSxZQUFZQSxHQUFHQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQTtZQUVwQ0EsSUFBSUEsS0FBa0JBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLEVBQWhDQSxNQUFNQSxjQUFFQSxLQUFLQSxXQUFtQkEsQ0FBQ0E7WUFDdENBLElBQUlBLFFBQVFBLEdBQUdBLElBQUlBLHdCQUFZQSxDQUFDQSxNQUFNQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUU5Q0EsSUFBSUEsRUFBRUEsR0FBR0EsVUFBQ0EsTUFBTUEsRUFBRUEsTUFBTUE7Z0JBQ3ZCQSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQSxZQUFZQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQTtZQUNwREEsQ0FBQ0EsQ0FBQ0E7WUFDRkEsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7WUFDbEJBLEVBQUVBLENBQUNBLEtBQUtBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1FBQ2pCQSxDQUFDQTtJQUNGQSxDQUFDQSIsImZpbGUiOiJiaW5kL2JpbmRub2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1vZGVsIGZyb20gXCIuL21vZGVsXCJcbmltcG9ydCB7cmVnZXh9IGZyb20gXCIuL2JpbmRcIlxuaW1wb3J0IHtQYXRoT2JzZXJ2ZXJ9IGZyb20gXCJvYnNlcnZlanNcIlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBiaW5kTm9kZShub2RlOk5vZGUsIG1vZGVsOk1vZGVsKTogdm9pZCB7XG5cdGxldCBpc1RleHROb2RlID0gbm9kZS5ub2RlVHlwZSA9PT0gMztcblx0bGV0IGhhc09ubHlUZXh0Tm9kZXMgPSAoPEVsZW1lbnQ+bm9kZSkuY2hpbGRFbGVtZW50Q291bnQgPT09IDAgXG5cdGlmKGlzVGV4dE5vZGUgfHwgaGFzT25seVRleHROb2Rlcykge1xuXHRcdGJpbmRUZXh0Tm9kZShub2RlLCBtb2RlbCk7XG5cdH1cblx0XG59XG5cbmZ1bmN0aW9uIGJpbmRUZXh0Tm9kZShub2RlOk5vZGUsIG1vZGVsOk1vZGVsKTogdm9pZCB7XG5cdHJlZ2V4Lmxhc3RJbmRleCA9IDA7XG5cdGxldCBtYXRjaCA9IHJlZ2V4LmV4ZWMobm9kZS50ZXh0Q29udGVudCk7XG5cdGlmKG1hdGNoKSB7XG5cdFx0bGV0IHBhdGggPSBtYXRjaFsxXTtcblx0XHRsZXQgciA9IG5ldyBSZWdFeHAoXCJcXHtcXHtcIiArIHBhdGggKyBcIlxcfVxcfVwiLCBcImdcIilcblx0XHRcblx0XHRcblx0XHRsZXQgb3JpZ2luYWxUZXh0ID0gbm9kZS50ZXh0Q29udGVudDtcblx0XHRcblx0XHRsZXQge29iamVjdCwgdmFsdWV9ID0gbW9kZWwuZ2V0KHBhdGgpO1xuXHRcdGxldCBvYnNlcnZlciA9IG5ldyBQYXRoT2JzZXJ2ZXIob2JqZWN0LCBwYXRoKTtcblx0XHRcblx0XHRsZXQgY2IgPSAobmV3VmFsLCBvbGRWYWwpID0+IHtcblx0XHRcdG5vZGUudGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQucmVwbGFjZShyLCBuZXdWYWwpO1xuXHRcdH07XG5cdFx0b2JzZXJ2ZXIub3BlbihjYik7XG5cdFx0Y2IodmFsdWUsIG51bGwpO1xuXHR9XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
